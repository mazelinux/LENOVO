define("wkview:widget/view_recom_thirdad/view_recom_thirdad.js",function(e,a,d){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=e("wkcommon:widget/lib/doT/doT.min.js"),c=e("wkcommon:widget/ui/lib/inCharset/inCharset.js"),i=e("wkcommon:widget/ui/js_core/log/log.js"),o=e("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js"),l=e("wkcommon:widget/lib/fis/data/data.js"),r={init:function(e,a){var d=this;if(e=e.data,d.cbRecomAdSolved="function"==typeof a?a:function(){},d.mofangData=e,d.temp=0,d.fcEid=+e.eid||0,d.rightFc=e&&e.right_fengchao_ad?e.right_fengchao_ad:"",d.readFc=e&&e.read_fengchao_ad?e.read_fengchao_ad:"",d.rightWm=e&&e.recommend_ad_wangmeng?e.recommend_ad_wangmeng:"",d.goldClue=e&&e.right_fengchao_gold_ad?e.right_fengchao_gold_ad:"",d.pptFcAd=e&&e.ppt_fengchao_ad?e.ppt_fengchao_ad:"",d.wenji="",d.getOwnerAd(),d.readFc&&d.readFc.ad_place_data&&"object"==typeof d.readFc.ad_place_data?t.event.trigger("docloadOwnData",d.readFc):!d.goldClue&&d.readFc&&d.fcEid&&d.readFc.ad_place_data&&"object"!=typeof d.readFc.ad_place_data?t.event.trigger("docloadFCData",{readFc:d.readFc,fcEid:d.fcEid,callback:d.handleFcJumpLink}):d.goldClue||t.event.trigger("docloadWmData"),d.pptFcAd&&t.event.trigger("showPptFcAd",{pptFcAd:d.pptFcAd,callback:d.handleFcJumpLink}),d.goldClue){var n=e,c=l.get("WkInfo").DocInfo.docId;t.ajax({url:"/org/interface/getcorpusinfo?doc_id="+c,type:"get",success:function(e){0===+e.status.code&&(d.wenji=e.data,t(".goldclue-wrap").length>0&&d.renderGoldClue(n,e.data),e.data.goldClue=d.goldClue,t.event.trigger("showendPageGoldClueAd",e.data),i.xsend(1,101055))}})}d.logObj={},d.fcEid&&d.logNum(d.fcEid),d.events()},renderGoldClue:function(e,a){var d=(e.right_fengchao_gold_ad.ad_place_data.url,'<div class="goldclue-content">\n<div class="goldclue-head">\n<p class="goldclue-count"><em>{{= it.data.corpus_list.length}}</em>\u7bc7</p>\n<p class="goldclue-title">\u76f8\u5173\u7cbe\u54c1\u6587\u8f91</p>\n<p class="goldclue-notes"><em>{{= it.data.down_count}}</em>\u4eba\u5df2\u4e0b\u8f7d</p>\n</div>\n<ul class="goldclue-main">\n{{~it.data.show_corpus :item:i}}{{? i< 3}}\n		<li><a><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</a></li>\n{{?}}{{~}}</ul>\n<div class="goldclue-bottom">\n\u67e5\u770b\u5168\u90e8<em>{{= it.data.corpus_list.length}}</em>\u7bc7\u6587\u6863 ></div>\n</div>');d=n.template(d),t(".goldclue-wrap").html(d({data:a}))},renderLikeRecomFc:function(e){var a=this;t(".frist-item").html(e.ad_place_data);var d=e.ad_place_js,n="<script>"+d+"</script>";t("head").append(n);var o=t(".frist-item h1").text()||"",r=t(".frist-item p span").eq(0).text()||"",s=l.get("WkInfo").DocInfo.title||"",g=a.mofangData.query||"",p=a.mofangData.hasOwnProperty("callbk_tag")?a.mofangData.callbk_tag:100;s=s+"|"+o+"|"+g,(new c.InCharset).get(s,"gbk",function(e){i.xsend(1,100939,{callbk_tag:p,adTitle:e,clickUrl:r,refer:document.referrer,eid:a.fcEid})}),a.handleFcJumpLink(t(".frist-item"))},renderLikeRecomWm:function(){var e='<div class="item wangmeng_income">\n<div class="doc-title rt-wangmeng-title">\n<b class="ic ic-wangmeng"></b>\n<div id="cpro_u3075403" class="rt-wangmeng-wrap"></div>\n<script type="text/javascript">\n			(window.cproArray = window.cproArray || []).push({\n				id: "u3075403"\n			});\n		</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n</div>\n<div class="tail-info">\n<span style="width: 58%; display: inline-block;">www.baidu.com</span><span class="gd-g-u gd-u-3-8">\u641c\u7d22\u63a8\u8350</span>\n</div>\n</div>';e=n.template(e),t(".frist-item").html(e()),i.xsend(1,100945)},handleFcJumpLink:function(e){var a=e;if(a.length){var d=a.find("a"),n=new RegExp("(^|&)(tn|from)=([^&]*)(&|$)"),c=window.location.search.substr(1).match(n),i="";d.each(function(){var e=t(this).attr("href");e.indexOf("www.baidu.com/baidu.php")>-1&&(null!==c?(i=unescape(c[3]),e=e+"&shh=wenku.baidu.com&sht="+i):e+="&shh=wenku.baidu.com",t(this).attr("href",e))})}},getQueryString:function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),d=window.location.search.substr(1).match(a);return null!=d?unescape(d[2]):null},getOwnerAd:function(){var e=this,a=l.get("WkInfo").DocInfo?l.get("WkInfo").DocInfo.jiaoyu_vip_type:0;return a?void e.cbRecomAdSolved():void t.ajax({type:"get",url:"/shifen/get?pid=79&tid=1&t="+(new Date-0),dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQuery1101044385951719611816_1479991920168",success:function(a){document.referrer;if(a[0].tpl_data){var d=a[0].tpl_data,n=!1;"cpl_ad_028,cpl_ad_029,cpl_ad_030".search(d.pc[0].xpageId)>-1&&(n=!0);var c=['<p class="doc-title" style="text-overflow: ellipsis; overflow: hidden;">','<b class="ic ic-'+(n?"gift":"pdf")+'">',"</b>",'<a href="javascript:;" class="rec-items A-relate-doc logSend log-xsend raw-income" data-count="'+d.pc[0].showCount+'" data-xpage="'+d.pc[0].xpageId+'" data-url="'+a[0].url+'" data-fun="raw-income" title="'+d.pc[0].showTitle+'" data-adId="'+a[0].ad_id+'">',d.pc[0].showTitle,'</a></p><div class="gd-g tail-info"><div class="gd-g-u gd-u-',n?"23":"11",'-24 gd-value"><span>',d.pc[0].showCount,"</span>\u4eba"+(n?"\u5df2\u9884\u7ea6":"\u4e0b\u8f7d")+"</div>",n?"":'<div class="gd-g-u gd-u-1-4">&nbsp;',n?"":d.pc[0].showNum,n?"":"\u7bc7</div></div>"].join("");t(".frist-item").html(c),i.xsend(1,100997),n&&i.xsend(1,101105,{id:a[0].ad_id,index:1}),e.cbRecomAdSolved()}else e.renderLikeRecomFcOrWm(),e.cbRecomAdSolved()},error:function(){e.renderLikeRecomFcOrWm(),e.cbRecomAdSolved()}})},renderLikeRecomFcOrWm:function(){var e=this;e.rightFc&&e.rightFc.ad_place_data&&e.renderLikeRecomFc(e.rightFc),e.rightWm&&e.renderLikeRecomWm(e.rightWm)},logNum:function(e){var a=this;62307102===e&&a.rightFc&&a.rightFc.ad_place_data?a.logObj.id="101026":82307102===e&&a.readFc&&a.readFc.ad_place_data?a.logObj.id="101027":72307102===e&&a.readFc&&a.readFc.ad_place_data&&(a.logObj.id="101028"),a.logObj.id&&(t(".more-btn-banner .banner-download").on("click",function(){i.xsend(1,a.logObj.id,{index:1})}),t(".pay-page-inner .reader-download").on("click",function(){i.xsend(1,a.logObj.id,{index:2})}),t(".pay-page-inner .btn-login-joinvip-rightnow").on("click",function(){i.xsend(1,a.logObj.id,{index:3})}),t(".more-btn-banner .goBtn").on("click",function(){i.xsend(1,a.logObj.id,{index:4})}))},events:function(){var e=this;t(".goldclue-wrap").on("click",function(a){var d=t(a.target);if(!d.hasClass("goldclue-notes")){i.xsend(1,101056);var n=e.goldClue;e.temp||t(".goldclue-wrap").hasClass("second-click")?new o(n,e.wenji,3):(new o(n,e.wenji,1),t(".goldclue-wrap").hasClass("second-click")||t(".goldclue-wrap").addClass("second-click"),e.temp=e.temp+1)}})}};d.exports=r});