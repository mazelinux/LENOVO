define("wkview:widget/raw_income/native_income/native_income.js",function(a,i,t){var s=a("wkcommon:widget/ui/lib/jquery/jquery.js"),n=(a("wkcommon:widget/lib/tangram/base/base.js"),a("wkcommon:widget/ui/js_core/_dialog/_dialog.js")),e=a("wkcommon:widget/lib/doT/doT.min.js"),c=a("wkview:widget/raw_income/raw_income.js"),d=a("wkcommon:widget/ui/js_core/log/log.js"),o=(a("wkview:widget/html_view/html_reader/js/page.js").page,a("wkcommon:widget/ui/js_core/xform/xform.js")),l=function(){this.option={},this.cacheList="",this.video="",this.cacheData={},this.downloadTpl=e.template('<!-- htmlcs-disable -->\n{{? it.list == 1 }}\n<div class="ads-doc-list">\n    <div class="header">\n        <div class="myclose"></div>\n        <div class="close list-close-btn"></div>\n        <h2>{{= it.data.title}}</h2>\n        <p>\u5171<span class="counter">{{= it.data.doc_list.length}}</span>\u7bc7\u6587\u6863&nbsp;&nbsp;{{= it.data.count}}\u4eba\u5df2\u4e0b\u8f7d</p>\n        </div>\n    <div class="cont" id="cont">\n        <ul class="list dialog-list">\n            {{if (it.data && it.data.doc_list.length >0) {}}\n            {{for(var i=0;i< it.data.doc_list.length;i++) {}}\n            <li><span class="number">{{=i+1}}</span> <span class="ic ic-{{=it.data.doc_list[i].type}}"></span>{{=it.data.doc_list[i].title}}</li>\n            {{}}}\n            {{ } }}\n        </ul>\n        <a href="###" class="ui-bz-btn-senior native-ads-download-btn">\n            <b class="ui-bz-btn-p-40 ui-bz-btc ">\u514d\u8d39\u4e0b\u8f7d</b>\n            </a>\n        </div>\n    <div class="public-tip">{{= it.data.advertiser}} <span class="private">\u9690\u79c1\u4fdd\u969c<div class="hover-tip-hujiang"><span class="arrow-icon"></span>{{= it.data.privacy_policy}}</div></span></div>\n    </div>\n{{?? it.list == 0}}\n<div class="download-success-dialog">\n    <div class="myclose"></div>\n    <div class="close success-close-btn"></div>\n    <div class="dialog-left-greenbar"></div>\n    <div class="dialog-top">\n        <p class="doc-title" rel="new-dialog" alt="dialog_tit">{{=it.tmpdata.title}}</p>\n        </div>\n    <div class="dialog-inner tac">\n        <img class="ui-bz-avatar ui-bz-avatar-60-60" src="{{=it.tmpdata.step3.download_image}}" alt="" >\n        <p class="success">{{=it.tmpdata.step3.download_wenan}}\n            <a href="{{=it.tmpdata.step3.third_url}}" target="_blank" class="outlink log-xsend" data-logxsend="[1, 100897]">{{=it.tmpdata.step3.third_name}}</a>\n        </p>\n        </div>\n    {{? it.tmpdata.advertiser_step2}}\n    <div class="public-tip">\n        {{=it.tmpdata.advertiser_step2.before}}\n        <span class="name">{{=it.tmpdata.advertiser_step2.name}}</span>\n        {{=it.tmpdata.advertiser_step2.after}}\n        <span class="private">\u9690\u79c1\u4fdd\u969c<div class="hover-tip-hujiang"><span class="arrow-icon"></span>{{=it.tmpdata.privacy_policy}}</div></span>\n    </div>\n    {{??}}\n    <div class="public-tip">{{=it.tmpdata.advertiser}} <span class="private">\u9690\u79c1\u4fdd\u969c<div class="hover-tip-hujiang"><span class="arrow-icon"></span>{{=it.tmpdata.privacy_policy}}</div></span>\n        </div>\n    </div>\n    {{?}}\n{{?? it.list == 2}}\n    <div class="video-con">\n        <span class="myclose"></span>\n        <span class="video-close"></span>\n        <div class="header clearfix">\n            <span class="green-icon"></span><p class="video-title">{{= it.options.title}}</p><span class="video-size">&nbsp;(\u8bd5\u770b3\u5206\u949f)</span>\n        </div>\n        <div class="video" id="video">\n            \n        </div>\n        <div class="temp" style="display: none;">\n            <div class="video-wrap">\n\n            </div>\n            <p class="wenan">\u9884\u89c8\u7ed3\u675f</p>\n            <a href="{{= it.options.button_url}}" class="wrap-button" target="_blank">\u67e5\u770b\u5b8c\u6574\u89c6\u9891</a>\n        </div>\n        <div class="foot">\n            <img src="{{= it.options.video_img}}" alt="" class="video-jigou-icon">\n            <div class="content">\n                <div class="content-title">\n                    <span class="jigou-name">{{= it.options.release_user}}</span>&nbsp;\u63d0\u4f9b\u672c\u89c6\u9891\n                </div>\n                <p class="jigou-miaosu">{{= it.options.abstract}}</p>\n                <div class="video-tail-info">\n                    <span class="people-num">{{= it.options.view_count}}</span>\u4eba\u5df2\u89c2\u770b&nbsp;&nbsp;{{= it.options.section}}\n                </div>\n            </div>\n            <a href="{{= it.options.button_url}}"  target="_blank" title="" class="video-button">\u67e5\u770b\u5b8c\u6574\u89c6\u9891</a>\n        </div>\n    </div>\n{{?? it.list == 3}}\n<div class="ads-order-dialog">\n    <div class="header">\n        <div class="myclose"></div>\n        <div class="close list-close-btn"></div>\n        <h4>{{= it.data.title}}</h4>\n    </div>\n    <div class="container">\n        <img src="{{= it.data.banner}}" alt="">\n    </div>\n    <div class="footer">\n        <img src="{{= it.data.advertiser.advertiserLogo}}">\n        <p class="public-tip"><span>{{= it.data.advertiser.advertiserName}}</span>\u4e13\u4e1a\u63d0\u4f9b</p>\n        <p class="public-tip">{{= it.data.advertiser.advertiserTip}}</p>\n        <a href="###" class="ui-bz-btn-senior native-ads-download-btn">\n            <b class="ui-bz-btc ui-bz-btn-p-16">\u514d\u8d39\u9884\u7ea6</b>\n        </a>\n    </div>\n</div>\n\n{{?}}'),this.cacheData.downloadTpl=this.downloadTpl,this.init()};l.prototype={init:function(){var a=(s("head"),this);a.bindEvent(),window.oRawIncome=new c(a.cacheData)},showDialog:function(a,i){this.tempOptions=i;var t=this;if(1==a||3==a){3==a&&d.xsend(1,101105,{id:i.adId,index:2});var e=this.getData(a,i);if(e){var c={};1==a?c.doc_list=t.cacheList:3==a&&(c.banner=t.cacheData.banner),c.title=t.cacheData.title,c.advertiser=t.cacheData.advertiser,c.privacy_policy=t.cacheData.privacy_policy,c.count=t.cacheData.count;var o=n.customDialog;s(".ys-ads-mask").show(),new o({width:464,height:1==a?564:332,content:t.downloadTpl({list:a,data:c}),closeSelector:".myclose",mask:{bgColor:"transparent"}})}}},bindEvent:function(){var a=this;s("body").on("click",".success-close-btn, .list-close-btn",function(){s(".myclose").trigger("click"),s(".ys-ads-mask").hide()}),s("body").on("click",".native-ads-download-btn",function(){s(".myclose").trigger("click"),window.oRawIncome.showDialog(),d.xsend(1,100895,{id:a.option.ad_id})}),s("body").on("click",".wrap-button",function(){d.xsend(1,100914,{ac_id:a.tempOptions.ad_id,res_time:Date.parse(new Date)-a.tempTime})}),s("body").on("keyup",function(a){27==a.keyCode&&(s(".myclose").trigger("click"),s(".ys-ads-mask").hide(),s(window).trigger("videoClose"))}),s("body").on("click",".success a",function(){d.xsend(1,100897,{id:a.option.ad_id})})},getData:function(a,i){var t=this;return t.cacheList||t.cacheData.advertiser_step2?!0:(o.getJSON(i.xpageId,{success:function(e){var c=n.customDialog;1==a?t.cacheList=e.model.step1.doc_list:3==a&&(t.cacheData.banner=e.model.step1.banner,t.cacheData.advertiser_step2=e.model.step2.advertiser),t.cacheData.index=a,t.cacheData.title=e.model.step1.title,t.cacheData.step2=e.model.step2,t.cacheData.step3=e.model.step3,t.cacheData.advertiser=e.model.step1.advertiser,t.cacheData.privacy_policy=e.model.step1.privacy_policy,t.cacheData.download_tips=e.model.step1.download_tips,t.cacheData.adId=i.adId,t.cacheData.count=i.count,e.model.step1.count=i.count,s(".ys-ads-mask").show(),new c({width:464,height:1==a?564:332,content:t.downloadTpl({list:a,data:e.model.step1}),closeSelector:".myclose",mask:{bgColor:"transparent"}})}}),!1)}},t.exports=l});